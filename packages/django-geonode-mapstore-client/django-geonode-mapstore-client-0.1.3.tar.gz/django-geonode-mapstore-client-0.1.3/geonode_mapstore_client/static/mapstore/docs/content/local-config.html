
<html><head></head><body><h1 id="application-configuration">Application configuration</h1>
<hr />
<p>The application will load by default it will load the <code>localConfig.js</code></p>
<p>You can load a custom configuration by passing the <code>localConfig</code> argument in query string:</p>
<pre><code>localhost:8081/?localConfig=myConfig#/viewer/openlayers/0
</code></pre><p>The <strong>localConfig</strong> file contains the main information about URLs to load and plugins to load in the various modes.</p>
<p>This is the main structure:</p>
<pre><code>{
  // URL of geoStore
  "geoStoreUrl": "rest/geostore/",
  // printURL the url of the print service, if any
  "printUrl": "/geoserver-test/pdf/info.json",
  // a string or an object for the proxy URL.
  "proxyUrl": {
    // if it is an object, the url entry holds the url to the proxy
    "url": "/MapStore2/proxy/?url=",
    // useCORS array contains a list of services that support CORS and so do not need a proxy
    "useCORS": ["http://nominatim.openstreetmap.org", "https://nominatim.openstreetmap.org"]
  },
  // API keys for bing and mapquest services
  "bingApiKey",
  "mapquestApiKey",
  // path to the translation files directory (if different from default)
  "translationsPath",
  // if true, every ajax and mapping request will be authenticated with the configurations if match a rule
  "useAuthenticationRules": true
  // the athentication rules to match
  "authenticationRules": [
  { // every rule has a `urlPattern` regex to match
    "urlPattern": ".*geostore.*",
    // and a authentication `method` to use (basic, authkey)
    "method": "basic"
  }, {
    "urlPattern": "\\/geoserver.*",
    "method": "authkey"
  },
  // flag for postponing mapstore 2 load time after theme
  "loadAfterTheme": false,
  // optional state initializer (it will override the one defined in appConfig.js)
  "initialState": {
      // default initial state for every mode (will override initialState imposed by plugins reducers)
      "defaultState": {
          ...
          // if you want to customize the supported locales put here the languages you want and follow instruction linked below
          "locales": {
            "supportedLocales": {
              "it": {
                "code": "it-IT",
                "description": "Italiano"
              },
              "en": {
                "code": "en-US",
                "description": "English"
              }
          }
        }
      },
      // mobile override (defined properties will override default in mobile mode)
      "mobile": {
          ...
      }
  }
  "plugins": {
      // plugins to load for the mobile mode
      "mobile": [...]
      // plugins to load for the desktop mode
      "desktop": [...]
      // plugins to load for the embedded mode
      "embedded": [...]
      // plugins to load for the myMode mode
      "myMode": [...]
  }
],
</code></pre><p>If you are building your own app, you can choose to create your custom modes or force one of them by passing the <code>mode</code> parameter in the query string.</p>
<p>For adding a new locale or configuring currently supported locales, go check <a href="internationalization">this</a> out.</p>
<p>For configuring plugins, see the <a href="plugins-documentation">Configuring Plugins Section</a> and the <a href="./api/plugins">plugin reference page</a></p>
<h2 id="explanation-of-some-config-properties">Explanation of some config properties</h2>
<ul>
<li><strong>loadAfterTheme</strong> is a flag that allows to load mapstore.js after the theme which can be versioned or not(default.css). default is false</li>
<li><strong>initialState</strong> is an object that will initialize the state with some default values and this WILL OVERRIDE the initialState imposed by plugins &amp; reducers.</li>
</ul>
<h3 id="initialstate-configuration">initialState configuration</h3>
<p>It can contain:</p>
<ol>
<li>a defaultState valid for every mode</li>
<li>a piece of state for each mode (mobile, desktop, embedded)</li>
</ol>
<p>Inside defaultState you can set default catalog services adding the following key</p>
<pre><code>"catalog": {
  "default": {
    "newService": {
      "url": "",
      "type": "wms",
      "title": "",
      "isNew": true,
      "autoload": false
    },
    "selectedService": "Demo CSW Service",
    "services": {
      "Demo CSW Service": {
        "url": "https://demo.geo-solutions.it/geoserver/csw",
        "type": "csw",
        "title": "A title for Demo CSW Service",
        "autoload": true
      },
      "Demo WMS Service": {
        "url": "https://demo.geo-solutions.it/geoserver/wms",
        "type": "wms",
        "title": "A title for Demo WMS Service",
        "autoload": false
      },
      "Demo WMTS Service": {
        "url": "https://demo.geo-solutions.it/geoserver/gwc/service/wmts",
        "type": "wmts",
        "title": "A title for Demo WMTS Service",
        "autoload": false
      }
    }
  }
}
</code></pre><p>Set <code>selectedService</code> value to one of the ID of the services object ("Demo CSW Service" for example).
<br>This will become the default service opened and used in the catalog panel.
<br>For each service set the key of the service as the ID.</p>
<pre><code>"ID_CATALOG_SERVICE": {
  "url": "the url pointing to the catalog web service",
  "type": "the type of webservice used. (this need to be consistent with the web service pointed by the url)",
  "title": "the label used for recognizing the catalog service",
  "autoload": "if true, when selected or when catalog panel is opened it will trigger an automatic search of the layers. if false, search must be manually performed."
}
</code></pre><p><br>Be careful to use unique IDs
<br>Future implementations will try to detect the type from the url.
<br>newService is used internally as the starting object for an empty service.</p>
</body></html>