
<html><head></head><body><h1 id="developing-with-mapstore">Developing with MapStore</h1>
<hr />
<p>Due to the dual nature of the project (Java backend and JavaScript frontend) building and developing using the MapStore 2 framework requires two distinct set of tools</p>
<ul>
<li><a href="https://maven.apache.org/">Apache Maven</a> for Java</li>
<li><a href="https://www.npmjs.com/">NPM</a> for JavaScript.</li>
</ul>
<p>A basic knowledge of both tools is required.</p>
<h1 id="developing-and-debugging-the-framework">Developing and debugging the framework</h1>
<hr />
<p>To start developing the MapStore 2 framework you have to:</p>
<ul>
<li>download developer tools and frontend dependencies locally:</li>
</ul>
<p><code>npm install</code></p>
<p>After a while (depending on the network bandwidth) the full set of dependencies and tools will be downloaded to the <strong>node_modules</strong> subfolder.</p>
<ul>
<li>start a development instance of the framework and example applications:</li>
</ul>
<p><code>npm run examples</code></p>
<ul>
<li>or you can start a development instance <strong>without the examples</strong>:</li>
</ul>
<p><code>npm start</code></p>
<p>Then point your preferred browser to <a href="http://localhost:8081">http://localhost:8081</a>.</p>
<p>The HomePage contains links to the available demo applications.</p>
<h2 id="frontend-debugging">Frontend debugging</h2>
<p>The development instance uses file watching and live reload, so each time a MapStore 2 file is changed, the browser will reload the updated application.</p>
<p>Use your favourite editor / IDE to develop and debug on the browser as needed.</p>
<p>We suggest to use one of the following:</p>
<ul>
<li><a href="https://atom.io/">Atom</a> with the following plugins:<ul>
<li>editorconfig</li>
<li>linter</li>
<li>linter-eslint</li>
<li>react</li>
<li>lcovinfo</li>
<li>minimap &amp; minimap-highlight-selected</li>
<li>highlight-line &amp; highlight-selected</li>
</ul>
</li>
<li><a href="http://www.sublimetext.com/">Sublime Text Editor</a> with the following plugins:<ul>
<li>Babel</li>
<li>Babel snippets</li>
<li>Emmet</li>
</ul>
</li>
</ul>
<h3 id="redux-dev-tools">Redux Dev Tools</h3>
<p>When you are running the application locally using <code>npm start</code> you can debug the application with <a href="https://github.com/gaearon/redux-devtools">redux dev tools</a> using the flag ?debug=true</p>
<pre><code>http://localhost:8081/?debug=true#/?_k=c51bb5
</code></pre><p>It also integrates with the <a href="https://github.com/zalmoxisus/redux-devtools-extension">browser's extension</a>, if installed.</p>
<p>This way you can monitor the application's state evolution and the action triggered by your application.</p>
<h2 id="backend-services-debugging">Backend services debugging</h2>
<p>By default <code>npm start</code> runs a dev server connected to the mapstore 2 online demo as back-end.</p>
<p>If you want to use your own local test back-end you have to:</p>
<ol>
<li><p>run <code>mvn jetty:run</code> - it makes run the mapstore back-end locally (port 8080), Ã¬n memory db - By default 2 users</p>
<ul>
<li><code>admin</code> password <code>admin</code></li>
<li><code>user</code> with password <code>user</code></li>
</ul>
</li>
<li><p>Setup client to use the local back-end, apply this changes to webpack.config.js (at the devServer configuration)</p>
<pre><code class="lang-Javascript">devServer: {
 proxy: {
     '/mapstore/rest/': {
         target: "http://localhost:8080",
         pathRewrite: {'/mapstore/rest/': '/rest/'}
     },
     '/mapstore/proxy': {
         target: "http://localhost:8080",
         pathRewrite: {'/mapstore/proxy': '/proxy'}
     },
     '/docs': {
         target: "http://localhost:8081",
         pathRewrite: {'/docs': '/mapstore/docs'}
     }
 }
},
</code></pre>
</li>
<li>You have to run npm start to run mapstore client on port 8081, that is now connected to the local test back-end</li>
</ol>
<p>You can even run geostore and http-proxy separately and debug them with your own IDE. See the documentation about them in their own repositories.</p>
<h2 id="frontend-testing">Frontend testing</h2>
<p>To run the MapStore 2 frontend test suite you can use:</p>
<p><code>npm test</code></p>
<p>You can also have a continuously running watching test runner, that will execute the complete suite each time a file is changed, launching:</p>
<p><code>npm run continuoustest</code></p>
<p>To run ESLint checks launch:</p>
<p><code>npm run lint</code></p>
<p>To run the same tests Travis will check (before a pull request):
<code>npm run travis</code></p>
<p>More information on frontend building tools and configuration is available <a href="frontend-building-tools-and-configuration">here</a></p>
</body></html>