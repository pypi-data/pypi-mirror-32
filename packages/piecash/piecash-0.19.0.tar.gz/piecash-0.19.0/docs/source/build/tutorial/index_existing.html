

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial : using existing objects &mdash; Python interface to GnuCash documents 0.15.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Python interface to GnuCash documents 0.15.0 documentation" href="../index.html"/>
        <link rel="next" title="Tutorial : creating new objects" href="index_new.html"/>
        <link rel="prev" title="Documentation" href="../doc/doc.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Python interface to GnuCash documents
          

          
          </a>

          
            
            
              <div class="version">
                0.15.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">What’s new</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../doc/doc.html">Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial : using existing objects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#opening-an-existing-book">Opening an existing Book</a></li>
<li class="toctree-l2"><a class="reference internal" href="#access-to-objects">Access to objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accounts">Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commodities-and-prices">Commodities and Prices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transactions-and-splits">Transactions and Splits</a></li>
<li class="toctree-l2"><a class="reference internal" href="#invoices">Invoices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-objects">Other objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-slots">Working with slots</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index_new.html">Tutorial : creating new objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples of programs written with piecash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/comparison.html">piecash and the official python bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../android.html">piecash on android</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/piecash.html">piecash package</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../object_model.html">GnuCash SQL Object model and schema</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/resources.html">Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python interface to GnuCash documents</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Tutorial : using existing objects</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorial/index_existing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial-using-existing-objects">
<h1>Tutorial : using existing objects<a class="headerlink" href="#tutorial-using-existing-objects" title="Permalink to this headline">¶</a></h1>
<div class="section" id="opening-an-existing-book">
<h2>Opening an existing Book<a class="headerlink" href="#opening-an-existing-book" title="Permalink to this headline">¶</a></h2>
<p>To open an existing GnuCash document (and get the related <a class="reference internal" href="../api/piecash.core.book.html#piecash.core.book.Book" title="piecash.core.book.Book"><code class="xref py py-class docutils literal notranslate"><span class="pre">Book</span></code></a>), use the <code class="xref py py-func docutils literal notranslate"><span class="pre">open_book()</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">piecash</span>

<span class="c1"># for a sqlite3 document</span>
<span class="n">book</span> <span class="o">=</span> <span class="n">piecash</span><span class="o">.</span><span class="n">open_book</span><span class="p">(</span><span class="s2">&quot;existing_file.gnucash&quot;</span><span class="p">)</span>

<span class="c1"># or through an URI connection string for sqlite3</span>
<span class="n">book</span> <span class="o">=</span> <span class="n">piecash</span><span class="o">.</span><span class="n">open_book</span><span class="p">(</span><span class="n">uri_conn</span><span class="o">=</span><span class="s2">&quot;sqlite:///existing_file.gnucash&quot;</span><span class="p">)</span>
<span class="c1"># or for postgres</span>
<span class="n">book</span> <span class="o">=</span> <span class="n">piecash</span><span class="o">.</span><span class="n">open_book</span><span class="p">(</span><span class="n">uri_conn</span><span class="o">=</span><span class="s2">&quot;postgres://user:passwd@localhost/existing_gnucash_db&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The documents are open as readonly per default. To allow RW access, specify explicitly readonly=False as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">book</span> <span class="o">=</span> <span class="n">piecash</span><span class="o">.</span><span class="n">open_book</span><span class="p">(</span><span class="s2">&quot;existing_file.gnucash&quot;</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>When opening in full access (readonly=False), piecash will automatically create a backup file named
filename.piecash_YYYYMMDD_HHMMSS with the original file. To avoid creating the backup file, specificy backup=False as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">book</span> <span class="o">=</span> <span class="n">piecash</span><span class="o">.</span><span class="n">open_book</span><span class="p">(</span><span class="s2">&quot;existing_file.gnucash&quot;</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">backup</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>To force opening the file even through there is a lock on it, use the open_if_lock=True argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">book</span> <span class="o">=</span> <span class="n">piecash</span><span class="o">.</span><span class="n">open_book</span><span class="p">(</span><span class="s2">&quot;existing_file.gnucash&quot;</span><span class="p">,</span> <span class="n">open_if_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="access-to-objects">
<h2>Access to objects<a class="headerlink" href="#access-to-objects" title="Permalink to this headline">¶</a></h2>
<p>Once a GnuCash book is opened through a <a class="reference internal" href="../api/piecash.core.book.html#piecash.core.book.Book" title="piecash.core.book.Book"><code class="xref py py-class docutils literal notranslate"><span class="pre">piecash.core.book.Book</span></code></a>, GnuCash objects can be accessed
through two different patterns:</p>
<p>The object model</p>
<blockquote>
<div><p>In this mode, we access elements through their natural relations, starting from the book and jumping
from one object to the other:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">book</span> <span class="o">=</span> <span class="n">open_book</span><span class="p">(</span><span class="n">gnucash_books</span> <span class="o">+</span> <span class="s2">&quot;default_book.gnucash&quot;</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">book</span><span class="o">.</span><span class="n">root_account</span> <span class="c1"># accessing the root_account</span>
<span class="gh">Out[2]: </span><span class="go">Account&lt;[EUR]&gt;</span>

<span class="gp">In [3]: </span><span class="c1"># looping through the children accounts of the root_account</span>
<span class="gp">   ...: </span><span class="k">for</span> <span class="n">acc</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">root_account</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="k">print</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="go">                       Account&lt;Assets[EUR]&gt;</span>
<span class="go">Account&lt;Liabilities[EUR]&gt;</span>
<span class="go">Account&lt;Income[EUR]&gt;</span>
<span class="go">Account&lt;Expenses[EUR]&gt;</span>
<span class="go">Account&lt;Equity[EUR]&gt;</span>

<span class="go"># accessing children accounts</span>
<span class="gp">In [5]: </span>
<span class="gp">   ...: </span><span class="n">root</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">root_account</span>              <span class="c1"># select the root_account</span>
<span class="gp">   ...: </span><span class="n">assets</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Assets&quot;</span><span class="p">)</span>   <span class="c1"># select child account by name</span>
<span class="gp">   ...: </span><span class="n">cur_assets</span> <span class="o">=</span> <span class="n">assets</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>         <span class="c1"># select child account by index</span>
<span class="gp">   ...: </span><span class="n">cash</span> <span class="o">=</span> <span class="n">cur_assets</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;CASH&quot;</span><span class="p">)</span> <span class="c1"># select child account by type</span>
<span class="gp">   ...: </span><span class="k">print</span><span class="p">(</span><span class="n">cash</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="go">                                                                                                                                       Account&lt;Assets:Current Assets:Cash in Wallet[EUR]&gt;</span>

<span class="gp">In [10]: </span><span class="c1"># get the commodity of an account</span>
<span class="gp">   ....: </span><span class="n">commo</span> <span class="o">=</span> <span class="n">cash</span><span class="o">.</span><span class="n">commodity</span>
<span class="gp">   ....: </span><span class="k">print</span><span class="p">(</span><span class="n">commo</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="go">                                                                                                                                                                                          Commodity&lt;CURRENCY:EUR&gt;</span>

<span class="gp">In [13]: </span><span class="c1"># get first ten accounts linked to the commodity commo</span>
<span class="gp">   ....: </span><span class="k">for</span> <span class="n">acc</span> <span class="ow">in</span> <span class="n">commo</span><span class="o">.</span><span class="n">accounts</span><span class="p">[:</span><span class="mi">10</span><span class="p">]:</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="go">                                                                                                                                                                                                                  Account&lt;[EUR]&gt;</span>
<span class="go">Account&lt;Assets[EUR]&gt;</span>
<span class="go">Account&lt;Assets:Current Assets[EUR]&gt;</span>
<span class="go">Account&lt;Assets:Current Assets:Checking Account[EUR]&gt;</span>
<span class="go">Account&lt;Assets:Current Assets:Savings Account[EUR]&gt;</span>
<span class="go">Account&lt;Assets:Current Assets:Cash in Wallet[EUR]&gt;</span>
<span class="go">Account&lt;Liabilities[EUR]&gt;</span>
<span class="go">Account&lt;Liabilities:Credit Card[EUR]&gt;</span>
<span class="go">Account&lt;Income[EUR]&gt;</span>
<span class="go">Account&lt;Income:Bonus[EUR]&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>The “table” access</p>
<blockquote>
<div><p>In this mode, we access elements through collections directly accessible from the book:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">book</span> <span class="o">=</span> <span class="n">open_book</span><span class="p">(</span><span class="n">gnucash_books</span> <span class="o">+</span> <span class="s2">&quot;default_book.gnucash&quot;</span><span class="p">)</span>

<span class="go"># accessing all accounts</span>
<span class="gp">In [16]: </span><span class="n">book</span><span class="o">.</span><span class="n">accounts</span>
<span class="gh">Out[16]: </span><span class="go"></span>
<span class="go">[Account&lt;Assets[EUR]&gt;,</span>
<span class="go"> Account&lt;Assets:Current Assets[EUR]&gt;,</span>
<span class="go"> Account&lt;Assets:Current Assets:Checking Account[EUR]&gt;,</span>
<span class="go"> Account&lt;Assets:Current Assets:Savings Account[EUR]&gt;,</span>
<span class="go"> Account&lt;Assets:Current Assets:Cash in Wallet[EUR]&gt;,</span>
<span class="go"> Account&lt;Liabilities[EUR]&gt;,</span>
<span class="go"> Account&lt;Liabilities:Credit Card[EUR]&gt;,</span>
<span class="go"> Account&lt;Income[EUR]&gt;,</span>
<span class="go"> Account&lt;Income:Bonus[EUR]&gt;,</span>
<span class="go"> Account&lt;Income:Gifts Received[EUR]&gt;,</span>
<span class="go"> Account&lt;Income:Interest Income[EUR]&gt;,</span>
<span class="go"> Account&lt;Income:Interest Income:Checking Interest[EUR]&gt;,</span>
<span class="go"> Account&lt;Income:Interest Income:Other Interest[EUR]&gt;,</span>
<span class="go"> Account&lt;Income:Interest Income:Savings Interest[EUR]&gt;,</span>
<span class="go"> Account&lt;Income:Other Income[EUR]&gt;,</span>
<span class="go"> Account&lt;Income:Salary[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Adjustment[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Auto[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Auto:Fees[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Auto:Gas[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Auto:Parking[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Auto:Repair and Maintenance[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Bank Service Charge[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Books[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Cable[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Charity[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Clothes[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Computer[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Dining[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Education[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Entertainment[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Entertainment:Music/Movies[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Entertainment:Recreation[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Entertainment:Travel[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Gifts[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Groceries[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Hobbies[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Insurance[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Insurance:Auto Insurance[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Insurance:Health Insurance[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Insurance:Life Insurance[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Laundry/Dry Cleaning[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Medical Expenses[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Miscellaneous[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Online Services[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Phone[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Public Transportation[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Subscriptions[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Supplies[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Taxes[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Taxes:Federal[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Taxes:Medicare[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Taxes:Other Tax[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Taxes:Social Security[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Taxes:State/Province[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Utilities[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Utilities:Electric[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Utilities:Garbage collection[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Utilities:Gas[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Utilities:Water[EUR]&gt;,</span>
<span class="go"> Account&lt;Equity[EUR]&gt;,</span>
<span class="go"> Account&lt;Equity:Opening Balances[EUR]&gt;]</span>

<span class="go"># accessing all commodities</span>
<span class="gp">In [17]: </span><span class="n">book</span><span class="o">.</span><span class="n">commodities</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Out[17]: [Commodity&lt;CURRENCY:EUR&gt;]</span>

<span class="go"># accessing all transactions</span>
<span class="gp">In [18]: </span><span class="n">book</span><span class="o">.</span><span class="n">transactions</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Out[18]: []</span>
</pre></div>
</div>
<p>Each of these collections can be either iterated or accessed through some indexation or filter mechanism (return
first element of collection satisfying some criteria(s)):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># iteration</span>
<span class="gp">In [19]: </span><span class="k">for</span> <span class="n">acc</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">accounts</span><span class="p">:</span>
<span class="gp">   ....: </span>    <span class="k">if</span> <span class="n">acc</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;ASSET&quot;</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="go">Account&lt;Assets[EUR]&gt;</span>
<span class="go">Account&lt;Assets:Current Assets[EUR]&gt;</span>

<span class="go"># indexation (not very meaningful)</span>
<span class="gp">In [20]: </span><span class="n">book</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="go">                                                         Out[20]: Account&lt;Income:Interest Income[EUR]&gt;</span>

<span class="go"># filter by name</span>
<span class="gp">In [21]: </span><span class="n">book</span><span class="o">.</span><span class="n">accounts</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Garbage collection&quot;</span><span class="p">)</span>
<span class="go">                                                                                                       Out[21]: Account&lt;Expenses:Utilities:Garbage collection[EUR]&gt;</span>

<span class="go"># filter by type</span>
<span class="gp">In [22]: </span><span class="n">book</span><span class="o">.</span><span class="n">accounts</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;EXPENSE&quot;</span><span class="p">)</span>
<span class="go">                                                                                                                                                                    Out[22]: Account&lt;Expenses[EUR]&gt;</span>

<span class="go"># filter by fullname</span>
<span class="gp">In [23]: </span><span class="n">book</span><span class="o">.</span><span class="n">accounts</span><span class="p">(</span><span class="n">fullname</span><span class="o">=</span><span class="s2">&quot;Expenses:Taxes:Social Security&quot;</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                    Out[23]: Account&lt;Expenses:Taxes:Social Security[EUR]&gt;</span>

<span class="go"># filter by multiple criteria</span>
<span class="gp">In [24]: </span><span class="n">book</span><span class="o">.</span><span class="n">accounts</span><span class="p">(</span><span class="n">commodity</span><span class="o">=</span><span class="n">book</span><span class="o">.</span><span class="n">commodities</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Gas&quot;</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                          Out[24]: Account&lt;Expenses:Auto:Gas[EUR]&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>The “SQLAlchemy” access (advanced users)</p>
<blockquote>
<div><p>In this mode, we access elements through SQLAlchemy queries on the SQLAlchemy session:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># retrieve underlying SQLAlchemy session object</span>
<span class="gp">In [1]: </span><span class="n">session</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">session</span>

<span class="go"># get all account with name &gt;= &quot;T&quot;</span>
<span class="gp">In [2]: </span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Account</span><span class="o">.</span><span class="n">name</span><span class="o">&gt;=</span><span class="s2">&quot;T&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="gh">Out[2]: </span><span class="go"></span>
<span class="go">[Account&lt;Expenses:Entertainment:Travel[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Taxes[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Utilities[EUR]&gt;,</span>
<span class="go"> Account&lt;Expenses:Utilities:Water[EUR]&gt;,</span>
<span class="go"> Account&lt;&gt;]</span>

<span class="go"># display underlying query</span>
<span class="gp">In [3]: </span><span class="nb">str</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Account</span><span class="o">.</span><span class="n">name</span><span class="o">&gt;=</span><span class="s2">&quot;T&quot;</span><span class="p">))</span>
<span class="go">                                                                                                                                                                              Out[3]: &#39;SELECT accounts.account_type AS accounts_account_type, accounts.commodity_scu AS accounts_commodity_scu, accounts.non_std_scu AS accounts_non_std_scu, accounts.placeholder AS accounts_placeholder, accounts.guid AS accounts_guid, accounts.name AS accounts_name, accounts.commodity_guid AS accounts_commodity_guid, accounts.parent_guid AS accounts_parent_guid, accounts.code AS accounts_code, accounts.description AS accounts_description, accounts.hidden AS accounts_hidden \nFROM accounts \nWHERE accounts.name &gt;= ?&#39;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="accounts">
<h2>Accounts<a class="headerlink" href="#accounts" title="Permalink to this headline">¶</a></h2>
<p>Accessing the accounts (<a class="reference internal" href="../api/piecash.core.account.html#piecash.core.account.Account" title="piecash.core.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">piecash.core.account.Account</span></code></a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">piecash</span> <span class="k">import</span> <span class="n">open_book</span>

<span class="k">with</span> <span class="n">open_book</span><span class="p">(</span><span class="s2">&quot;gnucash_books/simple_sample.gnucash&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">book</span><span class="p">:</span>
    <span class="c1"># accessing the root_account</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">root_account</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="c1"># accessing the first children account of a book</span>
    <span class="n">acc</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>

    <span class="c1"># accessing attributes of an account</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Account name=</span><span class="si">{acc.name}</span><span class="se">\n</span><span class="s2">&quot;</span>
          <span class="s2">&quot;        commodity=</span><span class="si">{acc.commodity.namespace}</span><span class="s2">/</span><span class="si">{acc.commodity.mnemonic}</span><span class="se">\n</span><span class="s2">&quot;</span>
          <span class="s2">&quot;        fullname=</span><span class="si">{acc.fullname}</span><span class="se">\n</span><span class="s2">&quot;</span>
          <span class="s2">&quot;        type=</span><span class="si">{acc.type}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">acc</span><span class="o">=</span><span class="n">acc</span><span class="p">))</span>

    <span class="c1"># accessing all splits related to an account</span>
    <span class="k">for</span> <span class="n">sp</span> <span class="ow">in</span> <span class="n">acc</span><span class="o">.</span><span class="n">splits</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;account &lt;</span><span class="si">{}</span><span class="s2">&gt; is involved in transaction &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">acc</span><span class="o">.</span><span class="n">fullname</span><span class="p">,</span> <span class="n">sp</span><span class="o">.</span><span class="n">transaction</span><span class="o">.</span><span class="n">description</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="commodities-and-prices">
<h2>Commodities and Prices<a class="headerlink" href="#commodities-and-prices" title="Permalink to this headline">¶</a></h2>
<p>The list of all commodities in the book can be retrieved via the <code class="docutils literal notranslate"><span class="pre">commodities</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># all commodities</span>
<span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="o">.</span><span class="n">commodities</span><span class="p">)</span>

<span class="n">cdty</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">commodities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># accessing attributes of a commodity</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Commodity namespace=</span><span class="si">{cdty.namespace}</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="s2">&quot;          mnemonic=</span><span class="si">{cdty.mnemonic}</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="s2">&quot;          cusip=</span><span class="si">{cdty.cusip}</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="s2">&quot;          fraction=</span><span class="si">{cdty.fraction}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cdty</span><span class="o">=</span><span class="n">cdty</span><span class="p">))</span>
</pre></div>
</div>
<p>The prices (<a class="reference internal" href="../api/piecash.core.commodity.html#piecash.core.commodity.Price" title="piecash.core.commodity.Price"><code class="xref py py-class docutils literal notranslate"><span class="pre">piecash.core.commodity.Price</span></code></a>) of a commodity can be iterated through the <code class="docutils literal notranslate"><span class="pre">prices</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># loop on the prices</span>
<span class="k">for</span> <span class="n">pr</span> <span class="ow">in</span> <span class="n">cdty</span><span class="o">.</span><span class="n">prices</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Price date=</span><span class="si">{pr.date}</span><span class="s2">&quot;</span>
          <span class="s2">&quot;      value=</span><span class="si">{pr.value}</span><span class="s2"> </span><span class="si">{pr.currency.mnemonic}</span><span class="s2">/</span><span class="si">{pr.commodity.mnemonic}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pr</span><span class="o">=</span><span class="n">pr</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="transactions-and-splits">
<h2>Transactions and Splits<a class="headerlink" href="#transactions-and-splits" title="Permalink to this headline">¶</a></h2>
<p>The list of all transactions in the book can be retrieved via the <code class="docutils literal notranslate"><span class="pre">transactions</span></code> attribute:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">book</span> <span class="o">=</span> <span class="n">open_book</span><span class="p">(</span><span class="n">gnucash_books</span> <span class="o">+</span> <span class="s2">&quot;book_schtx.gnucash&quot;</span><span class="p">,</span> <span class="n">open_if_lock</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="go"># all transactions (including transactions part of a scheduled transaction description)</span>
<span class="gp">In [2]: </span><span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">transactions</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="k">print</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-01-03&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Insurance&#39; on 2015-01-03&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-01-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-02-03 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-03-03 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-04-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-05-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-06-02 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-07-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-08-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-09-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-10-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-11-03 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2014-12-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-01-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Insurance&#39; on 2013-06-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Insurance&#39; on 2014-05-30 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Opening balance&#39; on 2013-01-03&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-02-02 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-03-02 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-04-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-05-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-06-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-07-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-08-03 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-09-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-10-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Monthly utility bill&#39; on 2015-11-02 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;Insurance&#39; on 2015-06-01 (from sch tx)&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;test&#39; on 2015-11-18&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;salary&#39; on 2014-01-01&gt;</span>
<span class="go">Transaction&lt;[EUR] &#39;salary&#39; on 2015-01-01&gt;</span>

<span class="go"># selecting first transaction generated from a scheduled transaction</span>
<span class="gp">In [3]: </span><span class="n">tr</span> <span class="o">=</span> <span class="p">[</span> <span class="n">tr</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">transactions</span> <span class="k">if</span> <span class="n">tr</span><span class="o">.</span><span class="n">scheduled_transaction</span> <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>For a given transaction, the following attributes are accessible:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># accessing attributes of a transaction</span>
<span class="gp">In [1]: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Transaction description=&#39;{tr.description}&#39;</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ...: </span>      <span class="s2">&quot;            currency={tr.currency}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ...: </span>      <span class="s2">&quot;            post_date={tr.post_date}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">   ...: </span>      <span class="s2">&quot;            enter_date={tr.enter_date}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tr</span><span class="o">=</span><span class="n">tr</span><span class="p">))</span>
<span class="gp">   ...: </span>
<span class="go">Transaction description=&#39;Monthly utility bill&#39;</span>
<span class="go">            currency=Commodity&lt;CURRENCY:EUR&gt;</span>
<span class="go">            post_date=2014-01-01</span>
<span class="go">            enter_date=2015-01-03 09:18:13+01:00</span>

<span class="go"># accessing the splits of the transaction</span>
<span class="gp">In [2]: </span><span class="n">tr</span><span class="o">.</span><span class="n">splits</span>
<span class="go">                                                                                                                                                                              Out[2]: </span>
<span class="go">[Split&lt;Account&lt;Assets:Current Assets:Checking Account[EUR]&gt; -70 EUR&gt;,</span>
<span class="go"> Split&lt;Account&lt;Expenses:Utilities:Electric[EUR]&gt; 30 EUR&gt;,</span>
<span class="go"> Split&lt;Account&lt;Expenses:Utilities:Gas[EUR]&gt; 40 EUR&gt;]</span>

<span class="go"># accessing the scheduled transaction</span>
<span class="gp">In [3]: </span><span class="p">[</span> <span class="n">sp</span> <span class="k">for</span> <span class="n">sp</span> <span class="ow">in</span> <span class="n">tr</span><span class="o">.</span><span class="n">scheduled_transaction</span><span class="o">.</span><span class="n">template_account</span><span class="o">.</span><span class="n">splits</span><span class="p">]</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                            Out[3]: </span>
<span class="go">[SplitTemplate&lt;Account&lt;Assets:Current Assets:Checking Account[EUR]&gt; credit=70 &gt;,</span>
<span class="go"> SplitTemplate&lt;Account&lt;Expenses:Utilities:Electric[EUR]&gt;  debit=30&gt;,</span>
<span class="go"> SplitTemplate&lt;Account&lt;Expenses:Utilities:Gas[EUR]&gt;  debit=40&gt;]</span>
</pre></div>
</div>
</div>
<div class="section" id="invoices">
<h2>Invoices<a class="headerlink" href="#invoices" title="Permalink to this headline">¶</a></h2>
<p>The list of all invoices in the book can be retrieved via the <code class="docutils literal notranslate"><span class="pre">invoices</span></code> attribute:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">book</span> <span class="o">=</span> <span class="n">open_book</span><span class="p">(</span><span class="n">gnucash_books</span> <span class="o">+</span> <span class="s2">&quot;invoices.gnucash&quot;</span><span class="p">,</span> <span class="n">open_if_lock</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="go"># all invoices</span>
<span class="gp">In [2]: </span><span class="k">for</span> <span class="n">invoice</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">invoices</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="k">print</span><span class="p">(</span><span class="n">invoice</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="go">Invoice&lt;000001&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="other-objects">
<h2>Other objects<a class="headerlink" href="#other-objects" title="Permalink to this headline">¶</a></h2>
<p>In fact, any object can be retrieved from the session through a generic <code class="docutils literal notranslate"><span class="pre">get(**kwargs)</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">piecash</span> <span class="k">import</span> <span class="n">Account</span><span class="p">,</span> <span class="n">Commodity</span><span class="p">,</span> <span class="n">Budget</span><span class="p">,</span> <span class="n">Vendor</span>

<span class="c1"># accessing specific objects through the get method</span>
<span class="n">acc</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Account</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Asset&quot;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">book</span><span class="o">.</span><span class="n">root_account</span><span class="p">)</span>
<span class="n">cdty</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Commodity</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;CURRENCY&quot;</span><span class="p">,</span> <span class="n">mnemonic</span><span class="o">=</span><span class="s2">&quot;EUR&quot;</span><span class="p">)</span>
<span class="n">bdgt</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Budget</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my first budget&quot;</span><span class="p">)</span>
<span class="n">invoice</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Vendor</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Looney&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you know SQLAlchemy, you can get access to the underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code> as <code class="docutils literal notranslate"><span class="pre">book.session</span></code> and execute
queries using the piecash classes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">piecash</span> <span class="k">import</span> <span class="n">Account</span><span class="p">,</span> <span class="n">Commodity</span><span class="p">,</span> <span class="n">Budget</span><span class="p">,</span> <span class="n">Vendor</span>

<span class="c1"># get the SQLAlchemy session</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">session</span>

<span class="c1"># loop through all invoices</span>
<span class="k">for</span> <span class="n">invoice</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Invoice</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">invoice</span><span class="o">.</span><span class="n">notes</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Easy access to objects from <a class="reference internal" href="../api/piecash.business.html#module-piecash.business" title="piecash.business"><code class="xref py py-mod docutils literal notranslate"><span class="pre">piecash.business</span></code></a> and <a class="reference internal" href="../api/piecash.budget.html#module-piecash.budget" title="piecash.budget"><code class="xref py py-mod docutils literal notranslate"><span class="pre">piecash.budget</span></code></a> could be given directly from the session
in future versions if deemed useful.</p>
</div>
</div>
<div class="section" id="working-with-slots">
<h2>Working with slots<a class="headerlink" href="#working-with-slots" title="Permalink to this headline">¶</a></h2>
<p>With regard to slots, GnuCash objects and Frames behave as dictionaries and all values are automatically
converted back and forth to python objects:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">datetime</span><span class="o">,</span> <span class="nn">decimal</span>

<span class="gp">In [2]: </span><span class="n">book</span> <span class="o">=</span> <span class="n">create_book</span><span class="p">()</span>

<span class="go"># retrieve list of slots</span>
<span class="gp">In [3]: </span><span class="k">print</span><span class="p">(</span><span class="n">book</span><span class="o">.</span><span class="n">slots</span><span class="p">)</span>
<span class="go">[&lt;SlotGUID default-currency=Commodity&lt;CURRENCY:EUR&gt;&gt;]</span>

<span class="go"># set slots</span>
<span class="gp">In [4]: </span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;myintkey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>

<span class="gp">In [5]: </span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;mystrkey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>

<span class="gp">In [6]: </span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;myboolkey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

<span class="gp">In [7]: </span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;mydatekey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>

<span class="gp">In [8]: </span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;mydatetimekey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>

<span class="gp">In [9]: </span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;mynumerickey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;12.34567&quot;</span><span class="p">)</span>

<span class="gp">In [10]: </span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;account&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">root_account</span>
<span class="go">WARNING:root:A datetime has been given with microseconds which are not saved in the database</span>

<span class="go"># iterate over all slots</span>
<span class="gp">In [11]: </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;slot={v} has key={k} and value={v.value} of type {t}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">v</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">value</span><span class="p">)))</span>
<span class="gp">   ....: </span>
<span class="go">                                                                                             slot=&lt;SlotGUID default-currency=Commodity&lt;CURRENCY:EUR&gt;&gt; has key=default-currency and value=Commodity&lt;CURRENCY:EUR&gt; of type &lt;class &#39;piecash.core.commodity.Commodity&#39;&gt;</span>
<span class="go">slot=&lt;SlotInt myintkey=3&gt; has key=myintkey and value=3 of type &lt;class &#39;int&#39;&gt;</span>
<span class="go">slot=&lt;SlotString mystrkey=&#39;hello&#39;&gt; has key=mystrkey and value=hello of type &lt;class &#39;str&#39;&gt;</span>
<span class="go">slot=&lt;SlotInt myboolkey=True&gt; has key=myboolkey and value=True of type &lt;class &#39;bool&#39;&gt;</span>
<span class="go">slot=&lt;SlotDate mydatekey=datetime.date(2018, 3, 9)&gt; has key=mydatekey and value=2018-03-09 of type &lt;class &#39;datetime.date&#39;&gt;</span>
<span class="go">slot=&lt;SlotTime mydatetimekey=datetime.datetime(2018, 3, 9, 19, 51, 25, 749225)&gt; has key=mydatetimekey and value=2018-03-09 19:51:25.749225 of type &lt;class &#39;datetime.datetime&#39;&gt;</span>
<span class="go">slot=&lt;SlotNumeric mynumerickey=Decimal(&#39;12.34567&#39;)&gt; has key=mynumerickey and value=12.34567 of type &lt;class &#39;decimal.Decimal&#39;&gt;</span>
<span class="go">slot=&lt;SlotGUID account=Account&lt;&gt;&gt; has key=account and value=Account&lt;&gt; of type &lt;class &#39;piecash.core.account.Account&#39;&gt;</span>

<span class="go"># delete a slot</span>
<span class="gp">In [12]: </span><span class="k">del</span> <span class="n">book</span><span class="p">[</span><span class="s2">&quot;myintkey&quot;</span><span class="p">]</span>

<span class="go"># delete all slots</span>
<span class="gp">In [13]: </span><span class="k">del</span> <span class="n">book</span><span class="p">[:]</span>

<span class="go"># create a key/value in a slot frames (and create them if they do not exist)</span>
<span class="gp">In [14]: </span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;options/Accounts/Use trading accounts&quot;</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;t&quot;</span>

<span class="go"># access a slot in frame in whatever notations</span>
<span class="gp">In [15]: </span><span class="n">s1</span><span class="o">=</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;options/Accounts/Use trading accounts&quot;</span><span class="p">]</span>

<span class="gp">In [16]: </span><span class="n">s2</span><span class="o">=</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;options&quot;</span><span class="p">][</span><span class="s2">&quot;Accounts/Use trading accounts&quot;</span><span class="p">]</span>

<span class="gp">In [17]: </span><span class="n">s3</span><span class="o">=</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;options/Accounts&quot;</span><span class="p">][</span><span class="s2">&quot;Use trading accounts&quot;</span><span class="p">]</span>

<span class="gp">In [18]: </span><span class="n">s4</span><span class="o">=</span><span class="n">book</span><span class="p">[</span><span class="s2">&quot;options&quot;</span><span class="p">][</span><span class="s2">&quot;Accounts&quot;</span><span class="p">][</span><span class="s2">&quot;Use trading accounts&quot;</span><span class="p">]</span>

<span class="gp">In [19]: </span><span class="k">assert</span> <span class="n">s1</span><span class="o">==</span><span class="n">s2</span><span class="o">==</span><span class="n">s3</span><span class="o">==</span><span class="n">s4</span>
</pre></div>
</div>
<p>Slots of type GUID use the name of the slot to do the conversion back and forth between an object and its guid. For
these slots, there is an explicit mapping between slot names and object types.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="index_new.html" class="btn btn-neutral float-right" title="Tutorial : creating new objects" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../doc/doc.html" class="btn btn-neutral" title="Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 sdementen.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.15.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>