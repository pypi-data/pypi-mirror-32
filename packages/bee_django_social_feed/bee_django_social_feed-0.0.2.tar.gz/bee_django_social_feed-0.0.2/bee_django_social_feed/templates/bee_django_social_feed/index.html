{% extends 'bee_django_social_feed/base.html' %}

{% block content %}
    <div class="col-md-6 col-md-offset-3">
        <div id="new-feed">
            {% verbatim %}
            <div class="bg-success text-center">
                {{ success_message }}
            </div>
            <div class="bg-danger">
                {{ error_message }}
            </div>
            {% endverbatim %}
            <textarea class="form-control" rows="3" placeholder="分享你的感受" v-model="content">
            </textarea>
            <input type="submit" value="发布" class="btn btn-default" id="post-new-feed"
                   data-confirm="{% url 'bee_django_social_feed:create_feed' %}"/>
        </div>

        <br/>
        <div id="feeds">
            <feed v-for="feed in feeds" v-bind:key="feed.pk" v-bind:feed="feed"></feed>
        </div>

        <div id="feeds-loader" class="well">
{#            <div v-if="status == 0" v-on:click="load_more_page">#}
{#                点击加载更多#}
{#            </div>#}
            <div v-if="status == 1">页面加载中，请稍后...</div>
            <div v-else-if="status == 2" v-on:click="load_more_page">
                加载超时，点击重试
            </div>
            <div v-else-if="status == 3">
                已到最后一页
            </div>
        </div>

    </div>
{% endblock content %}

{% block scripts %}
    {% load static %}
    <script src="{% static 'bee_django_social_feed/app.js' %}"></script>

    <script type="text/x-template" id="feed-template">
        <div class="feed well">
            {% verbatim %}
            <div class="feed-author">
                {{ feed.publisher.username }}
            </div>

            <div class="feed-content">
                {{ feed.content }}
            </div>

            <div class="feed-time">
                发表于 {{ feed.created_at | formatDate }}
            </div>
            {% endverbatim %}
        </div>
    </script>

{% endblock scripts %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'bee_django_social_feed/app.css' %}">
{% endblock styles %}