!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.brasilgovagenda=e():t.brasilgovagenda=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="++resource++brasil.gov.agenda/",e(e.s=1)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array(e-t).fill(t).map(function(t,e){return t+e*i})},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(Array(e).fill("0").join("")+t).slice(-1*e)},l=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,t),this.container=e,this.agendaURL=e.getAttribute("data-url"),this.callback=i,this.updateTitle=r,this.$month=this.$(".monthpicker .month, .calendar-title .strmonth"),this.$year=this.$(".monthpicker .year, .calendar-title .year"),this.$day=this.$(".daypicker"),this.$datePicker=this.$(".monthpicker input"),this.$datePicker3=this.$(".calendar"),this.$currentPicker=this.$datePicker.length>0?this.$datePicker:this.$datePicker3,this.initMonthPicker();var o=new Date;if(this.year=o.getFullYear(),this.month=o.getMonth(),this.day=o.getDate(),this.$(".daypicker").on("click",".day",this.onDayClick.bind(this)),$(".portaltype-agendadiaria").length>0){var s=location.pathname.split("/").pop(),l=s.split("-").map(function(t){return parseInt(t)}),c=a(l,3),u=c[0],d=c[1],h=c[2],p=new Date(u,d-1,h);this.year=p.getFullYear(),this.month=p.getMonth(),this.day=p.getDate()}}return r(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.container)})},{key:"update",value:function(){this.updateMonthPicker(),this.updateDayPicker();var t=this.year+"-"+s(this.month+1)+"-"+s(this.day);if("function"==typeof this.callback&&$.ajax({headers:{Accept:"application/json"},global:!1,url:this.agendaURL+"/"+t}).always(this.callback),this.updateTitle){var e=s(this.day)+"/"+s(this.month+1)+"/"+this.year,i="Agenda de "+$(".documentFirstHeading").text().trim()+" para "+e;window.history.pushState({day:this.day,month:this.month,year:this.year},i,this.agendaURL+"/"+t+"?month:int="+(this.month+1)+"&year:int="+this.year),document.title=i}}},{key:"updateMonthPicker",value:function(){if(this.$currentPicker.datepicker("setDate",new Date(this.year,this.month,this.day)),this.$datePicker.length>0){var t=this.$currentPicker.datepicker("option","monthNamesShort");this.$month.html(t[this.month].toUpperCase()),this.$year.html(this.year),$(".monthpicker").attr("data-month",this.month),$(".monthpicker").attr("data-year",this.year)}if(this.$datePicker3.length>0){var e=this.$currentPicker.datepicker("option","monthNames");this.$currentPicker.datepicker("option","showCurrentAtPos",1),setTimeout(function(){this.$currentPicker.datepicker("option","showCurrentAtPos",1)}.bind(this),1),this.$month.html(e[this.month].toUpperCase()),this.$year.html(this.year)}}},{key:"updateDayPicker",value:function(){var t=this,e=this.$currentPicker.datepicker("option","dayNamesShort"),i=o(-3,4).map(function(e){return new Date(t.year,t.month,t.day+e)});this.$day.html("");var n=!0,a=!1,r=void 0;try{for(var l,c=i[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value,d=["day"];u.getFullYear()===this.year&&u.getMonth()===this.month&&u.getDate()===this.day&&d.push("is-selected");var h=$('\n        <li data-day="'+u.toISOString()+'" class="'+d.join(" ")+'">\n          <div class="daypicker-day">'+u.getDate()+'</div>\n          <div class="daypicker-weekday">'+e[u.getDay()]+"</div>\n        </li>\n      "),p=u.getFullYear()+"-"+s(u.getMonth()+1)+"-"+s(u.getDate());$.ajax({headers:{Accept:"application/json"},url:this.agendaURL+"/"+p,global:!1,context:h}).done(function(t){this.addClass("has-appointment")}),this.$day.append(h)}}catch(t){a=!0,r=t}finally{try{!n&&c.return&&c.return()}finally{if(a)throw r}}}},{key:"initMonthPicker",value:function(){$(window).on("load",function(){var t=function(t,e){this.year=e.selectedYear,this.month=e.selectedMonth,this.day=parseInt(e.selectedDay),this.update()}.bind(this);this.$datePicker.datepicker({onSelect:t}),this.$datePicker3.datepicker({numberOfMonths:3,onSelect:t}),this.update()}.bind(this))}},{key:"onDayClick",value:function(t){t.preventDefault();var e=t.target;"LI"!==e.tagName&&(e=e.parentElement);var i=new Date(e.getAttribute("data-day"));this.year=i.getFullYear(),this.month=i.getMonth(),this.day=i.getDate(),this.$currentPicker.datepicker("setDate",i),this.update()}}]),t}();e.default=l},function(t,e,i){i(2),i(3),i(4),t.exports=i(5)},function(t,e,i){t.exports=i.p+"agenda_icon.png"},function(t,e,i){t.exports=i.p+"compromisso_icon.png"},function(t,e){},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(6),r=n(a),o=i(7),s=n(o);jQuery.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],$(function(){var t=!0,e=!1,i=void 0;try{for(var n,a=$(".agenda-tile")[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;new r.default(o)}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}var l=!0,c=!1,u=void 0;try{for(var d,h=$(".dados-agenda")[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;new s.default(p)}}catch(t){c=!0,u=t}finally{try{!l&&h.return&&h.return()}finally{if(c)throw u}}}),e.default={AgendaTile:r.default,AgendaView:s.default}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(Array(e).fill("0").join("")+t).slice(-1*e)},l=function(){function t(e){n(this,t),this.tile=e,this.pageSize=3,this.datepicker=new o.default(this.tile,this.onDateChange.bind(this)),this.initSwiper(),this.$(".is-now").append('<div class="now">Agora</div>')}return a(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.tile)})},{key:"onDateChange",value:function(t){var e=this;if(this.swiper.removeAllSlides(),this._$slide=$('<div class="swiper-slide"></div>'),void 0===t.items)return this._$slide.addClass("no-events"),this._$slide.html("Sem compromissos oficiais."),void this.swiper.appendSlide(this._$slide);this.compromissos=[];var i=!0,n=!1,a=void 0;try{for(var r,o=t.items[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var l=r.value;$.ajax({headers:{Accept:"application/json"},url:l["@id"],global:!1,async:!1,context:this}).done(function(t){e.compromissos.push(t)})}}catch(t){n=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}this.compromissos.sort(function(t,e){return new Date(t.start_date)-new Date(e.start_date)});var c=!0,u=!1,d=void 0;try{for(var h,p=this.compromissos[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;this._$slide.children().length===this.pageSize&&(this.swiper.appendSlide(this._$slide),this._$slide=$('<div class="swiper-slide"></div>'));var m=new Date,y=new Date(f.start_date),v=new Date(f.end_date),g=$('\n        <div class="collection-events-item">\n          <a class="title-item" href="'+f["@id"]+'">'+f.title+"</a>"+(null==f.location?"":'<div class="location-item">\n            <span class="location">'+f.location+"</span>\n          </div>")+'<div class="timestamp-cell">\n            <span class="timestamp">\n              '+s(y.getHours())+"h"+s(y.getMinutes())+"\n            </span>\n          </div>\n        </div>\n      ");m.getTime()>y.getTime()&&m.getTime()<v.getTime()&&($(".timestamp-cell",g).addClass("is-now"),$(".timestamp-cell",g).append('<div class="now">Agora</div>')),this._$slide.append(g)}}catch(t){u=!0,d=t}finally{try{!c&&p.return&&p.return()}finally{if(u)throw d}}this._$slide.children().length>0&&this.swiper.appendSlide(this._$slide)}},{key:"initSwiper",value:function(){this.swiper=new Swiper("#"+this.tile.id+" .collection-events",{navigation:{nextEl:"#"+this.tile.id+" .collection-events .swiper-button-next",prevEl:"#"+this.tile.id+" .collection-events .swiper-button-prev"},pagination:{el:"#"+this.tile.id+" .collection-events .swiper-pagination",clickable:!0}})}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(Array(e).fill("0").join("")+t).slice(-1*e)},l=function(){function t(e){n(this,t),this.container=e,this.datepicker=new o.default(e,this.onDateChange.bind(this),!0),this.$appointments=this.$(".list-compromissos")}return a(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.container.parentElement)})},{key:"onDateChange",value:function(t){var e=this;if(this.$appointments.html(""),void 0===t.items)return void this.$appointments.append('\n        <li class="sem-compromisso item-compromisso">\n          <span>Atualmente não existem compromissos agendados.</span>\n        </li>\n      ');this.compromissos=[];var i=!0,n=!1,a=void 0;try{for(var r,o=t.items[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var l=r.value;$.ajax({headers:{Accept:"application/json"},url:l["@id"],global:!1,async:!1,context:this}).done(function(t){e.compromissos.push(t)})}}catch(t){n=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}this.compromissos.sort(function(t,e){return new Date(t.start_date)-new Date(e.start_date)});var c=!0,u=!1,d=void 0;try{for(var h,p=this.compromissos[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value,m=new Date,y=new Date(f.start_date),v=new Date(f.end_date),g=$('\n        <li class="item-compromisso-wrapper">\n          <div class="item-compromisso">\n            <div class="compromisso-horarios">\n              <time class="horario compromisso-inicio"\n                    datetime="'+f.start_date+'">\n                '+s(y.getHours())+"h"+s(y.getMinutes())+'\n              </time>\n            </div>\n            <div class="compromisso-dados">\n              <h4 class="compromisso-titulo">'+f.title+"</h4>"+(null==f.location?"":'<p class="compromisso-local">'+f.location+"</p>")+'<span class="download-compromisso">\n                <a class="add-agenda vcal" href="'+f["@id"]+'/vcal_view">VCAL</a>\n                <span>Adicionar ao meu calendário</span>\n              </span>\n            </div>\n          </div>\n        </li>\n      ');m.getTime()>y.getTime()&&m.getTime()<v.getTime()&&$(".compromisso-horarios",g).append('<div class="now">Agora</div>'),this.$appointments.append(g)}}catch(t){u=!0,d=t}finally{try{!c&&p.return&&p.return()}finally{if(u)throw d}}}}]),t}();e.default=l}])});
//# sourceMappingURL=brasilgovagenda.js.map