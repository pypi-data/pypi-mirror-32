CHANGES
=======

6.1.7
-----

* Add logging to capabilities filter
* Avoid tox_install.sh for constraints support

6.1.6
-----

* Fix overcloud node delete after an upgrade

6.1.5
-----

* Zuul: Remove project name
* Remove RH1 OVB jobs from configuration

6.1.4
-----

* Migrate tripleo-common to zuul v3 jobs

6.1.3
-----

* Take wwn_with_extension into account, when configuring a boot device

6.1.2
-----

* Remove machine-id from image

6.1.1
-----

* Prompt to clear breakpoints when using deployed-server
* Remove svg links
* Remove update abort
* Ensure Swift Rings backup container and URLs
* Remove symlinks causing hiera hook to exit early
* Updated from global requirements
* Run introspection 20 nodes at a time
* Bump OS_BAREMETAL_API_VERSION to 1.29
* Add skip_deploy_identifier
* Remove ntp element

6.1.0
-----

* Add MigrationSshKey to generated passwords
* Remove legacy hiera element
* Handle re-created resources in StackUpdateManager
* Fix using old Swift rings when creating a new stack
* Fix typo in package_update.yaml
* overcloudrc: set OS_AUTH_TYPE
* Generate EtcdInitialClusterToken
* Make fencing action parameter optional
* Handle unprovisioned Ironic nodes in fencing parameter generator
* Updated from global requirements
* Fix Swift ring deployment and Newton to Ocata upgrades

6.0.0
-----

* Update to a newer hacking library
* Fix wrong args to update manager
* Just set the breakpoints on args passed to heat update
* Updated from global requirements
* Update the Nova client creation
* Open log in utf-8 to prevent UnicodeEncodeError
* Update .gitreview for stable/ocata

5.8.0
-----

* Updated from global requirements
* Force DIB_PYTHON_VERSION to be 2
* Re-enable tee behavior for image builds
* Fix race in undercloud cell_v2 host discovery
* Fix error message when failing to remove breakpoint
* Adds basic logging to the upgrade-non-controller.sh utility
* Updated from global requirements
* Add release notes since 5.7.0
* Fix class constructors
* Add missing linebreak in delorean-current.repo
* Add utility functions for deleting/emptying swift containers
* Run nova manage cell_v2 discover_host after ironic nodes are registered
* Add support for calling validations in deploy and introspect workflows
* Add support for jinja2 includes
* Use Mistral to create Swift temporary URLs
* Install python-heat-agent-json-file in overcloud-full
* Add action for generating fencing parameters
* Adding release nodes for Congress and Tacker
* Adding CongressPassword to constants
* Adding TackerPassword to constants
* Add element to regenerate dracut
* Add a 'manage' workflow
* Remove extraneous whitespace from baremetal.yaml
* Release notes for 5.8.0 (final Ocata)
* Updated from global requirements
* overcloud: include ntp element
* Add the iptables element to the image building process
* Add a delete stack workflow
* Add element to regenerate dracut on the agent
* Fix delete_node failures
* Add a PacemakerRemoteAuthkey to the default passwords
* Add password and key generation for Octavia
* Provided an option to disable the password generation
* Set imageext for IPA ramdisk
* Updated from global requirements
* Fail the deployment workflows when sending a "FAILED" message
* Fail the scale workflows when sending a "FAILED" message
* Fail the validation workflows when sending a "FAILED" message
* Fail the baremetal workflows when sending a "FAILED" message
* Fail the plan_management workflows when sending a "FAILED" message
* Add ReNo support
* Generate a CephX for manila ceph client service
* Generate a CephX for the new Ceph MDS service
* A script that pulls the latest puppet source
* Only start the deploy if the Heat stack isn't already in progress
* User provided pwd has to be merged for get_passwords workflow
* Add python-heat-agent-json-file to the heat docker agent
* Sync template processing
* Removes unnecessary utf-8 coding
* Force qemu logging to file
* Updated from global requirements
* Adds output for failure cases to delete plan action
* Add support for initial state to the register_or_update workflow
* When making sub-workflow calls, pass the queue_name
* Validate the plan name before running
* Add missing packages to agent container
* Install python-heat-agent-docker-cmd in overcloud-full
* Use packaged docker-cmd hook in heat-agents
* Block the scale down workflow until the stack is COMPLETE or FAILED
* Don't require mistralclient for password gen
* Heat-agents container: set up trunk repos correctly
* Implement stack update as mistral actions
* Remove unused exception HeatValidationFailedError
* Remove unused exception ContainerAlreadyExistsError
* Remove the unused constant OBJECT_META_KEY_PREFIX

5.7.0
-----

* Add utility workflow to wait for stack COMPLETE or FAILED
* Add FreeIPA enrollment environment generator
* Remove remaining vendor plugins from default image YAML
* Get config files for all openstack* packages
* Pin docutils version
* Add the remote tag to the badge image
* Drop use of hosts element
* Add missing os-net-config deps
* Replaces uuid.uuid4 with uuidutils.generate_uuid()
* Change 'cound' to 'could' in error message
* Fix build-image script output
* Remove heat_docker_agent/run-os-net-config
* heat-agents use moved 40-hiera-datafiles

5.6.0
-----

* Workflow for applying RAID configuration to Ironic nodes
* Add Ec2ApiPassword to PASSWORD_PARAMETER_NAMES
* Create a workflow for running manual cleaning on nodes
* Updated from global requirements
* Represent dib elements as a list
* Environment is a dict, which can't use 'extend'
* Move the overcloudrc generation from tripleoclient to a Mistral action
* Fix invalid tests
* Add python-heat-agent-ansible to overcloud images
* Fix flavor matching for object-storage role
* Add panko to generated passwords
* Convert exceptions to strings when passing them to the Result class
* Remove the underscore from the base action client methods
* Show team and repo badges on README
* Fix parameter update for custom roles
* Do not ignore pm_port for Drac drivers
* Use kwargs to pass in data and error to Mistral Result
* Revert changes to CephClusterFSID generation
* Generate CephClusterFSID for new stacks
* Build overcloud with overcloud-agent element
* Revert "Add CephClusterFSID to generated passwords"
* Fix tox -epep8 for Python3
* Drop *openstack/common* in flake8 exclude list
* Update container images to point to newton
* Pass the plan name when tagging nodes
* Remove network-gateway element from image build
* Fernet Key management

5.5.0
-----

* Remove discover from test-requirements
* Remove python-networking-cisco from overcloud-full image
* Install yum-plugin-priorities on centos images
* Only use parameter_defaults for scaling down
* Replace ucs_hostname with ucs_address
* Create new docker command hook
* Updated from global requirements
* Remove unused bits from node management code in utils/node.py
* Fix the validation ssh keys workflow
* Add CephClusterFSID to generated passwords
* Use parameters from existing Heat stack if it already exists
* Allow building heat-agents image from master
* Clean up configure_containers.sh script
* Install configuration files for all downloaded packages
* Sets defaults in swift connection related to retries
* Do not try "manage" actions on nodes that are not in "enroll" state
* Power off new nodes when making them available, not right after enrolling
* Remove last vestiges of oslo-incubator
* Updated from global requirements
* Refresh DeployIdentifier as well on update
* Port Scale Down Functionality into Workflow
* Fetch the snmpd_readonly_user_password from the Mistral environment
* Add new hiera agent hook to overcloud images
* Default the J2 excludes files to safe values
* Make UpdateManager use a passed-in stack setup
* Remove the duplication of Workbook in the description
* Add the KeystoneCredential0 and KeystoneCredential1 parameters
* Add the J2 exclude file exception (When file not found)
* Updated from global requirements
* Add support to create role main template file based in role.role.j2.yaml
* Changed the home-page link
* Open tripleo-common for Ocata
* Support node untagging
* Centos images no longer require epel element
* Modify j2 templating to allow role files generation
* Don't set node state during node registration
* Configure run-validation to use the custom output

5.2.0
-----

* Fix upload-swift-artifacts for old OSclient
* Retry sending messages to Zaqar if it fails
* Port password generation from tripleoclient to tripleo-common
* Remove the unused service_host arg from node registration
* TrivialFix: Remove default=None when set value in Config
* Remove references to overcloud-without-mergepy
* Remove the old, deprecated Mistral action names
* Updated from global requirements
* Return the result of create_plan in create_deployment_plan workflow
* Fix the default plan creation
* Default to Ironic API v1.15
* Add template processing to the update plan workflow
* Revert "Upgrades: Add StackUpgradeManager"
* Revert "Upgrades: Add post-upgrade stack update"
* Revert "Upgrades: Add initialization to StackUpgradeManager"
* Provide: return task result in case of failure

5.1.0
-----

* Add node tagging workflow
* Revert "Add template processing to the update plan workflow."
* Check the result of the parent action when subclassing
* Add FS_TYPE xfs to RHEL and CentOS images
* Replace agent elements with package python-heat-agent-puppet
* Add template processing to the update plan workflow
* Clearer error when the Mistral env already exists
* Set Deployment Parameters
* Updated from global requirements
* Add an action and workflow to update a plan
* Wire in jinja templating for custom roles
* Run copy_ssh_keys after overcloud finishes
* Remove "type: direct" from workflows as it is the default
* Fix an autoclass reference and add missing pages to the toctree
* Allow the validations to run openstack commands
* Handle missing mistral environment
* Clean up messages in the 'configure' workflow
* Fix the validation action name in the workbook
* Ironic Client: Bump the max_retries and retry_interval
* Test baremetal: Correctly stop the mocks
* Preserve the shell environment for run-validation
* Add port registration to IPMI power driver
* Fix error when identity file is missing
* Change default deploy artifacts container name
* Fix pep8 errors when running with python3
* Include environments in capabilities output
* Revert "Set Deployment Parameters"
* Add List Roles Action
* Allow for building specific images
* Fix upload-swift-artifacts work new OSclient

5.0.0
-----

* Use Openstack cli instead in order to get the instance status
* Allow running validation against different plans
* Disable retry files for ansible validations
* Workflows to run validations
* Workflows to load validations
* Don't expect input to be in every workflow in doc generation
* Better namespace the list of TripleO actions
* Set Deployment Parameters
* M/N upgrade: Fix ACTIVE node detection
* Generate reference documentation for Workbooks
* Add Mistral action & workflow for root device configuration
* Add Mistral action for boot configuration
* Add boot option argument to the Node Registration Mistral workflow
* Workflow to setup validations
* Updated from global requirements
* Fixes missing action entry point
* Exclude more unneeded files from default plan
* Change output for GetCapabilitiesAction
* Add Plan Deletion
* Verify that neither the Swift container or Mistral environment exist
* Adds Deployment Action & Workflow
* Add backwards compatibility for openstackclient
* Adds parameters actions
* Adds action for template processing
* Add support to image build yaml input to handle env vars
* Fix typo in Introspection workflow message
* Prevent replacement of Port, Net and Subnet
* Change image names to match what the rest of the system expects
* Remove epel element from base yaml ramdisk agent image
* Remove the delorean-repo element from CentOS images
* Ignore changes to images in nova servers
* Adds Plan List Action
* Change input for UpdateCapabilitiesAction
* Install the upload-* scripts with tripleo-common
* Fix formatting in doc files
* Updated from global requirements
* Extract `etc` files from openstack packages
* Build heat-docker-agents for specific versions
* Remove unnecessary packages
* Remove configure_container.sh script
* Don't clean after `yum update` in script
* Fix code highlighting in the README and the title in the toctree
* Minor update to the upgrade-non-controller.sh
* Move Workflow comments into the workflow description property
* Remove unused LOG to keep code clean
* Remove execution_id from the workflows

5.0.0.0b2
---------

* Updated from global requirements
* Remove sysctl element from overcloud image
* Deployment workflows for remote execution, etc
* Mistral action to drive Heat software deployments
* Updated from global requirements
* Add upload-puppet-modules script
* Updated from global requirements
* Add messaging to workflows
* Allow setting capabilities as a dict in addition to a string
* Add baremetal workflows
* Add RegisterNodesAction action
* Fix exception within deployment plan actions
* overcloud-odl : add new image file definition
* Fix interactive update race condition
* Add --json-output option to tripleo-build-images
* Support setting node UUID when registering nodes
* Add Heat Capabilities Actions
* Add a compatability shim to transition tripleoclient

5.0.0.0b1
---------

* Allow updating of nodes in baremetal import
* Removes unused code
* Add TripleO Mistral documentation
* Remove unnecessary package dhcp-client
* Initial Integration of Mistral into TripleO
* Updated from global requirements
* Import initial_state logic from tripleoclient
* Log diskimage-builder output to a file
* Remove the TODO from the README.rst
* Updated from global requirements
* Example yaml for building images
* StackAction parameter to distinguish top-level create vs. update
* Expose documented --seconds option
* Fix setting deploy kernel and image when updating nodes
* Fix upload-swift-artifacts with keystone v3
* Fix no-replace-server to accurately preview update

2.0.0
-----

* Return list of new nodes from register_all_nodes
* Import code working with Ironic nodes from os_cloud_config
* Upload docker image files from yaml config file
* Use a common constant for the Heat timeout value
* Build image files from definitions in yaml
* Remove ping test template from tripleo-common
* Upgrades: Add initialization to StackUpgradeManager
* Upgrades: Add post-upgrade stack update
* Remove tripleo.sh (now in tripleo-ci repo)
* Fix typos in code
* Use m1.small for ping test
* Replace deprecated LOG.warn with LOG.warning
* Install the upgrade-non-controller.sh script with tripleo-common
* Collect constants in one file
* Change the private subnet of the overcloud tenant network
* Missing python-ipaddr in heat-agents image
* Add capabilities filter for Nova
* Prevent any property change from replacing OS::Nova::Server
* Expose TENANT_STACK_DEPLOY_ARGS
* Adds override for the overcloud node user in upgrade-non-controller
* Upgrades: Add StackUpgradeManager
* Adds a bash script that operators will use during upgrades
* Updated from global requirements
* Use PyYAML's safe_dump to avoid outputting Python specific values
* Return current-tripleo symlink
* Override OS::Nova::Server for user_data updates
* Move delorean pin
* Reuse puppet modules already downloaded
* Allow updating images via `tripleo.sh --overcloud-images`
* Add requirement for gcc to delorean setup
* Convenience methods in base model class
* Pin puppet-nova
* Extend ping test create timeout
* Retry delorean package builds on known network errors
* Pin puppet-concat
* Detect when we need the alternate heat command
* Use Fedora image for ping test

1.0.0
-----

* Output some debug info when pingtest fails
* Revert "Pin puppet heat"
* Revert "Pin puppetlabs-mysql to get CI going"
* Pin puppet heat
* Catch NotFound when listing events during updates
* Update pingtest for newer heatclient
* Use git.openstack.org where possible
* Revert "Pin the puppetlabs mongodb puppet module"
* Pin the puppetlabs mongodb puppet module
* Adds a simple overcloud tenant vm ping test to tripleo.sh
* Add openstack packages to heat-agents container
* Update tripleo.sh to enable repo path override
* Remove stable/liberty pin
* Heat Docker agent built with Dockerfile
* Pin stable/liberty repo
* tripleo.sh support updating and checking deployed overcloud
* Update the container flag
* tripleo.sh add option to delete overcloud
* Add scripts/upload-swift-artifacts
* Add OVERCLOUD_IMAGES_ARGS environment variable
* Improve docs for template utils
* Rename stack_update to _stack_update
* Switch to Mega progress reports
* Fixes heat exceptions
* Add the missing plan name to the PlanAlreadyExistsError
* Drop py33 support
* Pin puppetlabs-mysql to get CI going
* Adds file deletion to plan manager
* Ensures plan exists
* Initial workflow implementation of tripleo-common
* Set a default timeout for 240 minutes for Heat Updates

0.1.0
-----

* Set origin/stable/liberty to the REF we want to build
* Remove Python 2.6
* Make coverage tests work
* Remove flavor creation
* tripleo.sh set priorities for stable repos
* Updated from global requirements
* Set DIB_INSTALLTYPE_puppet_modules for master/stable
* Show which breakpoint will be cleared by pressing Enter
* Change breakpoint removal log to info
* Deploy Docker compute role with tripleo.sh
* Don't install git-hg
* tripleo.sh initial support for stable branches
* Updated from global requirements
* Fix node group name when deleting a node
* Remove puppet-heat pin
* Update the repo whitelist to reflect what we CI
* Pin puppet-heat
* Fix cherry-pick comments
* tripleo.sh Add option to locally build delorean package
* tripleo.sh Add option to create a local Delorean environment
* Fix bashate errors
* Remove empty test file
* Explicitly unset package update hooks when deleting a node
* Fix CentOS detection
* Fix wrong node count when deleting specific nodes
* Remove support for Tuskar
* Add tripleo.sh
* Don't send default environment file on pkg update or scale
* Change ignore-errors to ignore_errors
* Catch and log all exceptions when removing a breakpoint
* Minimize walking through stack when removing a breakpoint
* Check if regexp is valid when updating packages
* Don't set UpdateIdentifier in tuskar plan
* Allow passing extra environment files when scaling nodes
* Make tuskar optional when scaling down
* Allow passing extra environment files to package update
* Make tuskar optional when running package update
* Add package update support
* Add a step-through heat stack update module
* Scale down heat stack
* Scale out heat stack
* Initial Cookiecutter Commit
* Added .gitreview
