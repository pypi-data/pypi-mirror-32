
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Changelog &#8212; Products.GenericSetup 1.10.1.dev0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Historical Changelog" href="HISTORY.html" />
    <link rel="prev" title="About Profiles" href="profiles.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="HISTORY.html" title="Historical Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="profiles.html" title="About Profiles"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Products.GenericSetup 1.10.1.dev0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="unreleased">
<h2>2.0 (unreleased)<a class="headerlink" href="#unreleased" title="Permalink to this headline">¶</a></h2>
<p>Breaking changes:</p>
<ul class="simple">
<li>Require Zope 4.0b4 as minimum supported Zope version and drop
explicit <code class="docutils literal notranslate"><span class="pre">Zope2</span></code> egg dependency.</li>
<li>Drop Python 3.4 support</li>
</ul>
<p>New features:</p>
<ul class="simple">
<li>Fixed tests with <code class="docutils literal notranslate"><span class="pre">Products.ZCatalog</span> <span class="pre">4.1</span></code>.  [maurits]</li>
<li>When <code class="docutils literal notranslate"><span class="pre">metadata.xml</span></code> parsing fails, show the filename in the <code class="docutils literal notranslate"><span class="pre">ExpatError</span></code>.
Fixes <a class="reference external" href="https://github.com/plone/Products.CMFPlone/issues/2303">Plone issue 2303</a>.</li>
<li>Prevent AttributeError ‘NoneType’ object has no attribute ‘decode’.
[maurits]</li>
<li>Finished compatibility with Python 3.5 and 3.6</li>
<li>Made the code PEP-8 compliant</li>
</ul>
</div>
<div class="section" id="id1">
<h2>1.10.0 (2017-12-07)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Breaking changes:</p>
<ul class="simple">
<li>Require Zope 4.0a6 as minimum supported Zope version.</li>
<li>Moved support for <cite>MailHost</cite> import/export into the
<code class="docutils literal notranslate"><span class="pre">Products.MailHost</span></code> package to cut the hard dependency.</li>
</ul>
<p>New features:</p>
<ul class="simple">
<li>Added <code class="docutils literal notranslate"><span class="pre">tox</span></code> testing configuration.</li>
<li>Pushed documentation to RTD: <a class="reference external" href="https://productsgenericsetup.readthedocs.io/">https://productsgenericsetup.readthedocs.io/</a>.</li>
</ul>
</div>
<div class="section" id="id2">
<h2>1.9.1 (2017-05-06)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Bug fixes:</p>
<ul class="simple">
<li>Fixed <code class="docutils literal notranslate"><span class="pre">upgradeStep</span></code> discriminator so that similar steps
for different profiles will not conflict.</li>
<li>Fixed <code class="docutils literal notranslate"><span class="pre">upgradeDepends</span></code> discriminator so that steps inside
<code class="docutils literal notranslate"><span class="pre">upgradeSteps</span></code> will conflict with steps outside if they
have the same <code class="docutils literal notranslate"><span class="pre">checker</span></code>.</li>
<li>Fix import of UnrestrictedUser.</li>
</ul>
</div>
<div class="section" id="id3">
<h2>1.9.0 (2017-05-04)<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Breaking changes:</p>
<ul class="simple">
<li>Drop support for Python 2.6.</li>
<li>Require Zope 4.0a3 as minimum supported Zope version.</li>
</ul>
</div>
<div class="section" id="id4">
<h2>1.8.7 (2017-03-26)<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Allow registering the same profile twice if it really is the same.
This is mostly for tests where the registry may not be cleaned up
correctly in case of problems in test teardown.
If you register the same profile twice in zcml, you still get a
conflict from <code class="docutils literal notranslate"><span class="pre">zope.configuration</span></code> during Zope startup.
[maurits]</li>
</ul>
</div>
<div class="section" id="id5">
<h2>1.8.6 (2016-12-30)<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added a <code class="docutils literal notranslate"><span class="pre">purge_old</span></code> option to the tarball import form.
By default this option is checked, which matches the previous behavior.
If you uncheck it, this avoids purging old settings for any import step
that is run.  [maurits]</li>
</ul>
</div>
<div class="section" id="id6">
<h2>1.8.5 (2016-11-01)<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Stopped using a form library to render the components form.</li>
</ul>
</div>
<div class="section" id="id7">
<h2>1.8.4 (2016-09-21)<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Made <code class="docutils literal notranslate"><span class="pre">_profile_upgrade_versions</span></code> a PersistentMapping.  When
<code class="docutils literal notranslate"><span class="pre">(un)setLastVersionForProfile</span></code> is called, we migrate the original
Python dictionary.  This makes some code easier and plays nicer with
transactions, which may especially help during tests.  [maurits]</li>
</ul>
</div>
<div class="section" id="id8">
<h2>1.8.3 (2016-04-28)<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Allowed overriding required and forbidden tools in <code class="docutils literal notranslate"><span class="pre">toolset.xml</span></code>.
If a tool is currently required and you import a <code class="docutils literal notranslate"><span class="pre">toolset.xml</span></code>
where it is forbidden, we remove the tool from the required list and
add it to the forbidden list.  And the other way around.  The
previous behavior was to raise an exception, which left no way in
xml to remove a tool.  Fail with a ValueError when the <code class="docutils literal notranslate"><span class="pre">remove</span></code>
keyword is used.  The expected behavior is unclear.  [maurits]</li>
</ul>
</div>
<div class="section" id="id9">
<h2>1.8.2 (2016-02-24)<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added optional <code class="docutils literal notranslate"><span class="pre">pre_handler</span></code> and <code class="docutils literal notranslate"><span class="pre">post_handler</span></code> to
<code class="docutils literal notranslate"><span class="pre">registerProfile</span></code> directive.  When set, these dotted names are
resolved to a function and are passed the setup tool as single
argument.  They are called before and after applying all import
steps of the profile they are registered for.  [maurits]</li>
<li>Sorted import profiles alphabetically lowercase.  Allow selecting a
profile by title or id.  [maurits]</li>
<li>Do not show dependency options on the full import tab when there are
no dependencies.  [maurits]</li>
<li>Do not select a profile by default in the import tabs.  [maurits]</li>
<li>Added simple toggle for all steps on the advanced import tab.
Also added this on the export tab.
[maurits]</li>
<li>Fixed importing a tarball.  This got an AttributeError: “‘NoneType’
object has no attribute ‘startswith’”.
[maurits]</li>
<li>Split overly complex Import tab into three tabs: Import (for
importing a full profile), Advanced Import (the original
<code class="docutils literal notranslate"><span class="pre">manage_importSteps</span></code> url leads to this tab), and Tarball Import.
[maurits]</li>
<li>Show note on import tab when there are pending upgrades.  Especially
show this for the currently selected profile.
[maurits]</li>
<li>Upgrades tab: show profiles with pending upgrades separately.  These
are the most important ones.  This avoids the need to manually go
through the whole list in order to find profiles that may need
action.  This uses new methods on the setup tool:
<code class="docutils literal notranslate"><span class="pre">hasPendingUpgrades</span></code>, <code class="docutils literal notranslate"><span class="pre">listProfilesWithPendingUpgrades</span></code>,
<code class="docutils literal notranslate"><span class="pre">listUptodateProfiles</span></code>.
[maurits]</li>
</ul>
</div>
<div class="section" id="id10">
<h2>1.8.1 (2015-12-16)<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Purge the profile upgrade versions before applying a base profile.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">purgeProfileVersions</span></code> method to <code class="docutils literal notranslate"><span class="pre">portal_setup</span></code>.  This
removes the all profiles profile upgrade versions.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">unsetLastVersionForProfile</span></code> method to <code class="docutils literal notranslate"><span class="pre">portal_setup</span></code>.  This
removes the profile id from the profile upgrade versions.  Calling
<code class="docutils literal notranslate"><span class="pre">setLastVersionForProfile</span></code> with <code class="docutils literal notranslate"><span class="pre">unknown</span></code> as version now has the
same effect.</li>
</ul>
</div>
<div class="section" id="id11">
<h2>1.8.0 (2015-09-21)<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Be more forgiving when dealing with profile ids with or without
<code class="docutils literal notranslate"><span class="pre">profile-</span></code> at the start.  All functions that accept a profile id
argument and only work when the id does <em>not</em> have this string at
the start, will now strip it off if it is there.  For example,
<code class="docutils literal notranslate"><span class="pre">getLastVersionForProfile</span></code> will give the same answer whether you
ask it for the version of profile id <code class="docutils literal notranslate"><span class="pre">foo</span></code> or <code class="docutils literal notranslate"><span class="pre">profile-foo</span></code>.</li>
<li>Dependency profiles from <code class="docutils literal notranslate"><span class="pre">metadata.xml</span></code> that are already applied,
are not applied again.  Instead, its upgrade steps, if any, are
applied.  In code you can choose the old behavior of always applying
the dependencies, by calling <code class="docutils literal notranslate"><span class="pre">runAllImportStepsFromProfile</span></code> with
<code class="docutils literal notranslate"><span class="pre">dependency_strategy=DEPENDENCY_STRATEGY_REAPPLY</span></code>.  There are four
strategies, which you can choose in the ZMI.</li>
</ul>
</div>
<div class="section" id="id12">
<h2>1.7.7 (2015-08-11)<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fix: when the last applied upgrade step had a checker, the profile
version was not updated.  Now we no longer look at the checker of
the last applied step when deciding whether to set the profile
version.  The checker, if any is set, normally returns True before
running the step (it can be applied), and False afterwards (it
was already applied).</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">upgradeProfile</span></code> method to setup tool.  This method applies all
upgrades steps for the given profile, or updates it to the optional
given version.  If the profile does not exist, or if there is no upgrade
step to go to the specified version, the method warns and does nothing.</li>
<li>Check the boolean value of the <code class="docutils literal notranslate"><span class="pre">remove</span></code> option when importing
objects.  Previously we only checked if the <code class="docutils literal notranslate"><span class="pre">remove</span></code> option was
given, regardless of its value.  Supported are <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">Yes</span></code>,
and <code class="docutils literal notranslate"><span class="pre">1</span></code>, where case does not matter.  The syntax for removing
objects, properties, and elements is now the same.</li>
<li>Support <code class="docutils literal notranslate"><span class="pre">remove=&quot;True&quot;</span></code> for properties.</li>
</ul>
</div>
<div class="section" id="id13">
<h2>1.7.6 (2015-07-15)<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Enable testing under Travis.</li>
<li>Fix compatibility with Setuptools 8.0 and later.  Upgrade steps
could get sorted in the wrong order, especially an empty version
string (upgrade step from any source version) sorted last instead of
first.</li>
</ul>
</div>
<div class="section" id="id14">
<h2>1.7.5 (2014-10-23)<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Allow skipping certain steps on <code class="docutils literal notranslate"><span class="pre">runAllImportStepsFromProfile</span></code>.</li>
</ul>
</div>
<div class="section" id="id15">
<h2>1.7.4 (2013-06-12)<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>On import, avoid clearing indexes whose state is unchanged.</li>
</ul>
</div>
<div class="section" id="id16">
<h2>1.7.3 (2012-10-16)<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Sort profiles on Upgrade form.</li>
<li>Use clickable labels with checkboxes on import, export and upgrade forms
to improve usability.</li>
</ul>
</div>
<div class="section" id="id17">
<h2>1.7.2 (2012-07-23)<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Avoid using <code class="docutils literal notranslate"><span class="pre">manage_FTPGet</span></code> on snapshot exports: that method messes
up the response headers.</li>
<li>ZopePageTemplate handler:  Fix export encoding: since 1.7.0, exports
must be UTF-8 strings</li>
</ul>
</div>
<div class="section" id="id18">
<h2>1.7.1 (2012-02-28)<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Restore the ability to make the setup tool use only import / export
steps explicitly called out by the current profile, ignoring any which
might be globally registered.  This is particularly useful for configuring
sites with baseline profiles, where arbitrary add-on steps are not only
useless, but potentially damaging.</li>
</ul>
</div>
<div class="section" id="id19">
<h2>1.7.0 (2012-01-27)<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>While importing <code class="docutils literal notranslate"><span class="pre">toolset.xml</span></code>, print a warning when the class of a
required tool is not found and continue with the next tool.  The
previous behaviour could break the install or uninstall of any
add-on, as the missing class may easily be from a different
unrelated add-on that is no longer available in the zope instance.</li>
<li>Exporters now explicitly only understand strings. The provided
registry handlers encode and decode data automatically to and from
UTF-8. Their default encoding changed from None to UTF-8.
If you have custom registry handlers, ensure that you encode your unicode.
Check especially if you use a page template to generate xml. They return
unicode and their output must also encoded.
If you choose to encode your strings with UTF-8, you can be sure that
your code will also work with GenericSetup &lt; 1.7</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changelog</a><ul>
<li><a class="reference internal" href="#unreleased">2.0 (unreleased)</a></li>
<li><a class="reference internal" href="#id1">1.10.0 (2017-12-07)</a></li>
<li><a class="reference internal" href="#id2">1.9.1 (2017-05-06)</a></li>
<li><a class="reference internal" href="#id3">1.9.0 (2017-05-04)</a></li>
<li><a class="reference internal" href="#id4">1.8.7 (2017-03-26)</a></li>
<li><a class="reference internal" href="#id5">1.8.6 (2016-12-30)</a></li>
<li><a class="reference internal" href="#id6">1.8.5 (2016-11-01)</a></li>
<li><a class="reference internal" href="#id7">1.8.4 (2016-09-21)</a></li>
<li><a class="reference internal" href="#id8">1.8.3 (2016-04-28)</a></li>
<li><a class="reference internal" href="#id9">1.8.2 (2016-02-24)</a></li>
<li><a class="reference internal" href="#id10">1.8.1 (2015-12-16)</a></li>
<li><a class="reference internal" href="#id11">1.8.0 (2015-09-21)</a></li>
<li><a class="reference internal" href="#id12">1.7.7 (2015-08-11)</a></li>
<li><a class="reference internal" href="#id13">1.7.6 (2015-07-15)</a></li>
<li><a class="reference internal" href="#id14">1.7.5 (2014-10-23)</a></li>
<li><a class="reference internal" href="#id15">1.7.4 (2013-06-12)</a></li>
<li><a class="reference internal" href="#id16">1.7.3 (2012-10-16)</a></li>
<li><a class="reference internal" href="#id17">1.7.2 (2012-07-23)</a></li>
<li><a class="reference internal" href="#id18">1.7.1 (2012-02-28)</a></li>
<li><a class="reference internal" href="#id19">1.7.0 (2012-01-27)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="profiles.html"
                        title="previous chapter">About Profiles</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="HISTORY.html"
                        title="next chapter">Historical Changelog</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/CHANGES.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="HISTORY.html" title="Historical Changelog"
             >next</a> |</li>
        <li class="right" >
          <a href="profiles.html" title="About Profiles"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Products.GenericSetup 1.10.1.dev0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2017, Zope CMF Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>