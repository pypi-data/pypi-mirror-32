{"version":3,"sources":["webpack:///./node_modules/@polymer/paper-item/paper-item-body.js","webpack:///./src/panels/shopping-list/ha-panel-shopping-list.js"],"names":["Object","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__","a","_template","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__","_templateObject","is","405","module","__webpack_exports__","__webpack_require__","r","strings","raw","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_12__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_13__","_mixins_localize_mixin_js__WEBPACK_IMPORTED_MODULE_16__","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","Constructor","protoProps","staticProps","prototype","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","value","getter","call","freeze","HaPanelShoppingList","__proto__","this","_fetchData","bind","hass","connection","subscribeEvents","then","unsub","_unsubEvents","callApi","items","reverse","ev","_this2","stopPropagation","model","item","id","complete","checked","catch","_this3","name","$","addBox","setTimeout","focus","keyCode","_addItem","_this4","_ev$model","index","set","narrow","Boolean","showMenu","canListen","type","Array","customElements","define"],"mappings":"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","file":"panel-shopping-list-928d4de34a5c5a89a232.chunk.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\nUse `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two- or\nthree- line items. It is a flex item that is a vertical flexbox.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n    </paper-item>\n\nThe child elements with the `secondary` attribute is given secondary text styling.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-body-two-line-min-height`   | Minimum height of a two-line item          | `72px`\n`--paper-item-body-three-line-min-height` | Minimum height of a three-line item        | `88px`\n`--paper-item-body-secondary-color`       | Foreground color for the `secondary` area  | `--secondary-text-color`\n`--paper-item-body-secondary`             | Mixin applied to the `secondary` area      | `{}`\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */\n        @apply --layout-vertical;\n        @apply --layout-center-justified;\n        @apply --layout-flex;\n      }\n\n      :host([two-line]) {\n        min-height: var(--paper-item-body-two-line-min-height, 72px);\n      }\n\n      :host([three-line]) {\n        min-height: var(--paper-item-body-three-line-min-height, 88px);\n      }\n\n      :host > ::slotted(*) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      :host > ::slotted([secondary]) {\n        @apply --paper-font-body1;\n\n        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));\n\n        @apply --paper-item-body-secondary;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-item-body'\n});\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-checkbox/paper-checkbox.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-icon-item.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../components/ha-menu-button.js';\nimport '../../components/ha-start-voice-button.js';\nimport LocalizeMixin from '../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaPanelShoppingList extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      :host {\n        height: 100%;\n      }\n      app-toolbar paper-listbox {\n        width: 150px;\n      }\n      app-toolbar paper-item {\n        cursor: pointer;\n      }\n      .content {\n        padding-bottom: 32px;\n        max-width: 600px;\n        margin: 0 auto;\n      }\n      paper-card {\n        display: block;\n      }\n      paper-icon-item {\n        border-top: 1px solid var(--divider-color);\n      }\n      paper-icon-item:first-child {\n        border-top: 0;\n      }\n      paper-checkbox {\n        padding: 11px;\n      }\n      paper-input {\n        --paper-input-container-underline: {\n          display: none;\n        }\n        --paper-input-container-underline-focus: {\n          display: none;\n        }\n        position: relative;\n        top: 1px;\n      }\n      .tip {\n        padding: 24px;\n        text-align: center;\n        color: var(--secondary-text-color);\n      }\n    </style>\n\n    <app-header-layout has-scrolling-region>\n      <app-header slot=\"header\" fixed>\n        <app-toolbar>\n          <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n          <div main-title>[[localize('panel.shopping_list')]]</div>\n          <ha-start-voice-button hass='[[hass]]' can-listen='{{canListen}}'></ha-start-voice-button>\n          <paper-menu-button\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n            vertical-offset=\"-5\"\n          >\n            <paper-icon-button\n              icon=\"mdi:dots-vertical\"\n              slot=\"dropdown-trigger\"\n            ></paper-icon-button>\n            <paper-listbox slot=\"dropdown-content\">\n              <paper-item\n                on-click=\"_clearCompleted\"\n              >[[localize('ui.panel.shopping-list.clear_completed')]]</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </app-toolbar>\n      </app-header>\n\n      <div class='content'>\n        <paper-card>\n          <paper-icon-item on-focus='_focusRowInput'>\n            <paper-icon-button\n              slot=\"item-icon\"\n              icon=\"mdi:plus\"\n              on-click='_addItem'\n            ></paper-icon-button>\n            <paper-item-body>\n              <paper-input\n                id='addBox'\n                placeholder=\"[[localize('ui.panel.shopping-list.add_item')]]\"\n                on-keydown='_addKeyPress'\n                no-label-float\n              ></paper-input>\n            </paper-item-body>\n          </paper-icon-item>\n\n          <template is='dom-repeat' items='[[items]]'>\n            <paper-icon-item>\n                <paper-checkbox\n                  slot=\"item-icon\"\n                  checked='{{item.complete}}'\n                  on-click='_itemCompleteTapped'\n                  tabindex='0'\n                ></paper-checkbox>\n              <paper-item-body>\n                <paper-input\n                  id='editBox'\n                  no-label-float\n                  value='[[item.name]]'\n                  on-change='_saveEdit'\n                ></paper-input>\n              </paper-item-body>\n            </paper-icon-item>\n          </template>\n        </paper-card>\n        <div class='tip' hidden$='[[!canListen]]'>\n          [[localize('ui.panel.shopping-list.microphone_tip')]]\n        </div>\n      </div>\n    </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n      canListen: Boolean,\n      items: {\n        type: Array,\n        value: [],\n      },\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._fetchData = this._fetchData.bind(this);\n\n    this.hass.connection.subscribeEvents(this._fetchData, 'shopping_list_updated')\n      .then(function (unsub) { this._unsubEvents = unsub; }.bind(this));\n    this._fetchData();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsubEvents) this._unsubEvents();\n  }\n\n  _fetchData() {\n    this.hass.callApi('get', 'shopping_list')\n      .then(function (items) {\n        items.reverse();\n        this.items = items;\n      }.bind(this));\n  }\n\n  _itemCompleteTapped(ev) {\n    ev.stopPropagation();\n    this.hass.callApi('post', 'shopping_list/item/' + ev.model.item.id, {\n      complete: ev.target.checked\n    }).catch(() => this._fetchData());\n  }\n\n  _addItem(ev) {\n    this.hass.callApi('post', 'shopping_list/item', {\n      name: this.$.addBox.value,\n    }).catch(() => this._fetchData());\n    this.$.addBox.value = '';\n    // Presence of 'ev' means tap on \"add\" button.\n    if (ev) {\n      setTimeout(() => this.$.addBox.focus(), 10);\n    }\n  }\n\n  _addKeyPress(ev) {\n    if (ev.keyCode === 13) {\n      this._addItem();\n    }\n  }\n\n  _saveEdit(ev) {\n    const { index, item } = ev.model;\n    const name = ev.target.value;\n\n    if (name === item.name) {\n      return;\n    }\n\n    this.set(['items', index, 'name'], name);\n    this.hass.callApi('post', 'shopping_list/item/' + item.id, {\n      name: name\n    }).catch(() => this._fetchData());\n  }\n\n  _clearCompleted() {\n    this.hass.callApi('POST', 'shopping_list/clear_completed');\n  }\n}\n\ncustomElements.define('ha-panel-shopping-list', HaPanelShoppingList);\n"],"sourceRoot":""}