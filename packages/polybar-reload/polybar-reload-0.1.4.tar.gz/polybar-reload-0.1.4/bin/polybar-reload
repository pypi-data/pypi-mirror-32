#!/usr/bin/env python
import logging
import os
import time
import select

from Xlib.display import Display
from subprocess import call

def get_screen_size():
    display = Display(os.environ.get("DISPLAY",":0.0"))
    root = display.screen().root
    w = root.get_geometry().width
    h = root.get_geometry().height
    return (w,h)
k = get_screen_size()

while True:
    j = get_screen_size()
    if j != k:
        call(['polybar-msg', 'cmd', 'restart'])
    k = j
    time.sleep(1)
